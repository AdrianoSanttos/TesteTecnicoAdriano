<div class="font-family">
  <h1>{{ title }}</h1>

  <form class="task-form" (ngSubmit)="addTodo()">
    <input
      type="text"
      [(ngModel)]="newTodo"
      name="todoInput"
      placeholder="Digite uma nova tarefa"
      class="task-input"
      [disabled]="isLoading"
      required
      autocomplete="off"
      aria-label="Nova tarefa"
    />
    <button
      type="submit"
      class="task-button"
      [disabled]="isLoading || !newTodo.trim()"
      aria-label="Adicionar tarefa"
    >
      <span *ngIf="isLoading">Carregando...</span>
      <span *ngIf="!isLoading">Adicionar</span>
    </button>
  </form>

  <div>
    <h2>Tarefas</h2>

    <div *ngIf="isLoading" class="loading-spinner">
      <mat-spinner color="warn"></mat-spinner>
    </div>
    <div *ngIf="!isLoading && todos.length === 0" class="no-tasks">
      Nenhuma tarefa encontrada.
    </div>
    <div *ngIf="errorMsg" class="error-msg">
      {{ errorMsg }}
    </div>

    <ul class="task-list">
      <li
        *ngFor="let todo of todos"
        class="task-list-item"
      >
        <span [class.completed]="todo.completed">
          {{ todo.title }}
        </span>
        <button
          (click)="removeTodo(todo.id)"
          class="task-remove"
          [disabled]="isLoading"
          aria-label="Remover tarefa"
        >
          Remover
        </button>
      </li>
    </ul>
  </div>
</div>

<router-outlet />
